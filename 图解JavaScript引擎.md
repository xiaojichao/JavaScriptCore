# å›¾è§£JavaScriptå¼•æ“Ž

![](media/15959140166340/15959140708898.jpg)

JavaScriptå¾ˆé…·ï¼Œä½†æ˜¯æœºå™¨æ˜¯å¦‚ä½•æ‰èƒ½çœŸæ­£ç†è§£æˆ‘ä»¬æ‰€ç¼–å†™çš„ä»£ç å‘¢ï¼Ÿä½œä¸ºJavaScriptå¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬é€šå¸¸ä¸å¿…è‡ªå·±å¤„ç†ç¼–è¯‘å™¨ã€‚ä¸è¿‡ï¼Œä¸€å®šè¦äº†è§£JavaScriptå¼•æ“Žçš„åŸºç¡€çŸ¥è¯†ï¼Œçœ‹çœ‹å®ƒå¦‚ä½•å¤„ç†æˆ‘ä»¬å¯¹äººç±»å‹å¥½çš„JSä»£ç ï¼Œå¹¶å°†å…¶è½¬æ¢æˆæœºå™¨å¯ä»¥ç†è§£çš„ä¸œè¥¿ï¼ðŸ¥³

> è¯·æ³¨æ„ï¼šè¿™ç¯‡æ–‡ç« ä¸»è¦åŸºäºŽNode.jså’ŒåŸºäºŽChromiumçš„æµè§ˆå™¨ä½¿ç”¨çš„V8å¼•æ“Žã€‚

HTMLè§£æžå™¨é‡åˆ°`script`æ ‡è®°ï¼Œä»£ç ä»Ž**ç½‘ç»œ**ã€**ç¼“å­˜**æˆ–å·²è£…å¥½çš„**service worker**åŠ è½½ã€‚å“åº”æ˜¯æŠŠè¯·æ±‚çš„è„šæœ¬ä½œä¸º**å­—èŠ‚æµ**ï¼Œç”±å­—èŠ‚æµè§£ç å™¨è´Ÿè´£ï¼**å­—èŠ‚æµè§£ç å™¨**åœ¨ä¸‹è½½å­—èŠ‚æµæ—¶å¯¹å…¶è¿›è¡Œè§£ç ã€‚

[![å›¾1.è„šæœ¬ä»Žç½‘ç»œã€ç¼“å­˜æˆ–è€…workerä¸‹è½½ä¸ºUTF-16å­—èŠ‚æµï¼Œå¹¶ä¼ ç»™å­—èŠ‚æµè§£ç å™¨ã€‚](media/15959140166340/e1.gif)](media/15959140166340/e1.gif)

å­—èŠ‚æµè§£ç å™¨ä»Žè¢«è§£ç çš„å­—èŠ‚æµä¸­åˆ›å»º**æ ‡è®°ï¼ˆtokenï¼‰**ã€‚æ¯”å¦‚ï¼Œ`0066`è§£ç ä¸º`f`ï¼Œ`0075`è§£ç ä¸º`u`ï¼Œ`006e`è§£ç ä¸º`n`ï¼Œ`0063`è§£ç ä¸º`c`ï¼Œ`0074`è§£ç ä¸º`t`ï¼Œ`0069`è§£ç ä¸º`i`ï¼Œ`006f`è§£ç ä¸º`o`ï¼Œ`006e`è§£ç ä¸º`n`ï¼ŒåŽé¢è·Ÿä¸€ä¸ªç©ºæ ¼ã€‚è¿™ä¸å°±æ˜¯æˆ‘ä»¬ä»£ç ä¸­å†™çš„`function`ä¹ˆï¼è¿™æ˜¯JavaScriptä¸­çš„ä¸€ä¸ªä¿ç•™å…³é”®å­—ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ ‡è®°ï¼Œå¹¶å‘é€ç»™è§£æžå™¨ï¼ˆå’Œ*é¢„è§£æžå™¨*ï¼Œè¿™åœ¨gifä¸­æ²¡æœ‰ä»‹ç»ï¼Œä½†ç¨åŽä¼šè§£é‡Šï¼‰ã€‚å­—èŠ‚æµçš„å…¶ä½™éƒ¨åˆ†ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚

[![å›¾2.å­—èŠ‚æµè§£ç å™¨å°†å­—èŠ‚è§£ç ä¸ºæ ‡è®°ï¼Œæ ‡è®°è¢«å‘é€ç»™è§£æžå™¨ã€‚](media/15959140166340/e2.gif)](media/15959140166340/e2.gif)

å¼•æ“Žä½¿ç”¨ä¸¤ä¸ªè§£æžå™¨ï¼š**é¢„è§£æžå™¨ï¼ˆPre-Parserï¼‰**å’Œ**è§£æžå™¨ï¼ˆParserï¼‰**ã€‚ä¸ºäº†å‡å°‘åŠ è½½ç½‘ç«™æ‰€éœ€çš„æ—¶é—´ï¼Œå¼•æ“Žå°è¯•é¿å…è§£æžä¸éœ€è¦ç«‹å³æ‰§è¡Œçš„ä»£ç ã€‚é¢„å¤„ç†å™¨å¤„ç†ç¨åŽå¯èƒ½ä½¿ç”¨çš„ä»£ç ï¼Œè€Œè§£æžå™¨å¤„ç†ç«‹å³éœ€è¦çš„ä»£ç ï¼å¦‚æžœæŸä¸ªå‡½æ•°åªåœ¨ç”¨æˆ·å•å‡»æŒ‰é’®åŽæ‰è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦ç«‹å³ç¼–è¯‘è¿™æ®µä»£ç æ¥åŠ è½½åˆ°ç½‘ç«™ã€‚å¦‚æžœç”¨æˆ·æœ€ç»ˆå•å‡»æŒ‰é’®å¹¶éœ€è¦è¿™æ®µä»£ç ï¼Œå®ƒæ‰è¢«å‘é€åˆ°è§£æžå™¨ã€‚

è§£æžå™¨æ ¹æ®ä»Žå­—èŠ‚æµè§£ç å™¨æŽ¥æ”¶çš„æ ‡è®°åˆ›å»ºèŠ‚ç‚¹ï¼Œå¹¶ç”¨è¿™äº›èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘æˆ–ASTï¼ˆAbstract Syntax Treeï¼‰ã€‚ðŸŒ³

[![å›¾3.è§£æžå™¨åŸºäºŽæ ‡è®°åˆ›å»ºèŠ‚ç‚¹ï¼Œå¹¶åˆ›å»ºæŠ½è±¡è¯­æ³•æ ‘ã€‚](media/15959140166340/e3.gif)](media/15959140166340/e3.gif)

æŽ¥ä¸‹æ¥ï¼Œè¯¥**è§£é‡Šå™¨ï¼ˆInterpreterï¼‰**å‡ºåœºäº†ï¼ è§£é‡Šå™¨éåŽ†ASTï¼Œå¹¶æ ¹æ®ASTæ‰€åŒ…å«çš„ä¿¡æ¯ç”Ÿæˆ**å­—èŠ‚ç **ã€‚å­—èŠ‚ç ç”Ÿæˆå®Œæ¯•åŽï¼Œä¼šåˆ é™¤ASTï¼Œä»¥æ¸…é™¤å†…å­˜ç©ºé—´ã€‚æœ€åŽï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€äº›æœºå™¨å¯ä»¥å¤„ç†çš„ä¸œè¥¿äº†ï¼ðŸŽ‰

[![å›¾4.è§£é‡Šå™¨éåŽ†ASTå¹¶ç”Ÿæˆå­—èŠ‚ç ã€‚](media/15959140166340/e4.gif)

å°½ç®¡å­—èŠ‚ç å¾ˆå¿«ï¼Œä½†æ˜¯å®ƒè¿˜å¯ä»¥æ›´å¿«ç‚¹ã€‚éšç€æ­¤å­—èŠ‚ç è¿è¡Œï¼Œä¼šç”Ÿæˆä¸€äº›ä¿¡æ¯ã€‚å®ƒå¯ä»¥æ£€æµ‹æŸäº›è¡Œä¸ºæ˜¯å¦ç»å¸¸å‘ç”Ÿï¼Œä»¥åŠæ‰€ä½¿ç”¨çš„æ•°æ®ç±»åž‹ã€‚å¯èƒ½æˆ‘ä»¬å·²ç»è°ƒç”¨äº†æŸä¸ªå‡½æ•°å‡ åæ¬¡æ•°ï¼šè¯¥å¯¹å®ƒè¿›è¡Œä¼˜åŒ–ï¼Œè®©å®ƒè¿è¡Œå¾—æ›´å¿«äº†ï¼ðŸƒðŸ½â€â™€ï¸ 

å­—èŠ‚ç ä¸Žç”Ÿæˆçš„ç±»åž‹åé¦ˆä¸€èµ·ï¼Œè¢«å‘é€åˆ°**ä¼˜åŒ–ç¼–è¯‘å™¨**ã€‚ä¼˜åŒ–ç¼–è¯‘å™¨èŽ·å–å­—èŠ‚ç å’Œç±»åž‹åé¦ˆï¼Œå¹¶ä»Žä¸­ç”Ÿæˆé«˜åº¦ä¼˜åŒ–è¿‡çš„æœºå™¨ç ã€‚  ðŸš€

[![å›¾5.å­—èŠ‚ç å’Œç±»åž‹åé¦ˆè¢«å‘é€åˆ°ä¼˜åŒ–ç¼–è¯‘å™¨ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆé«˜åº¦ä¼˜åŒ–è¿‡çš„æœºå™¨ç ã€‚](media/15959140166340/e5.gif)

JavaScriptæ˜¯ä¸€ç§åŠ¨æ€ç±»åž‹çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€æ•°æ®çš„ç±»åž‹å¯ä»¥ä¸æ–­å˜åŒ–ã€‚å¦‚æžœJavaScriptå¼•æ“Žæ¯æ¬¡éƒ½å¾—æ£€æŸ¥æŸä¸ªå€¼æ˜¯å“ªç§æ•°æ®ç±»åž‹ï¼Œé‚£å°±ä¼šéžå¸¸æ…¢ã€‚

ä¸ºäº†å‡å°‘è§£é‡Šä»£ç æ‰€éœ€çš„æ—¶é—´ï¼Œä¼˜åŒ–è¿‡çš„æœºå™¨ç ä»…å¤„ç†åœ¨æ‰§è¡Œå­—èŠ‚ç æ—¶å¼•æ“Žå·²ç»è§è¿‡çš„æƒ…å†µã€‚å¦‚æžœæˆ‘ä»¬åå¤ä½¿ç”¨æŸæ®µåå¤è¿”å›ž**ç›¸åŒ**æ•°æ®ç±»åž‹ä»£ç ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç®€å•åœ°é‡æ–°ä½¿ç”¨ç»è¿‡ä¼˜åŒ–çš„æœºå™¨ç ä»¥åŠ å¿«å¤„ç†é€Ÿåº¦ã€‚ä¸è¿‡ï¼Œç”±äºŽJavaScriptæ˜¯åŠ¨æ€ç±»åž‹çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå‘ç”ŸåŒæ ·çš„ä»£ç çªç„¶è¿”å›žä¸åŒç±»åž‹çš„æ•°æ®çš„æƒ…å†µã€‚å¦‚æžœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå¼•æ“Žå°±ä¼šå¯¹æœºå™¨ç è¿›è¡Œéžæœ€ä½³åŒ–ï¼Œå¹¶ä¸”ä¼šé€€å›žåˆ°è§£é‡Šç”Ÿæˆçš„å­—èŠ‚ç ã€‚

å‡å¦‚æŸä¸ªå‡½æ•°è¢«è°ƒç”¨äº†100æ¬¡ï¼Œå¹¶ä¸”åˆ°ç›®å‰ä¸ºæ­¢ä¸€ç›´è¿”å›žç›¸åŒçš„å€¼ï¼Œå¼•æ“Žå°±ä¼šå‡è®¾åœ¨ç¬¬101æ¬¡è°ƒç”¨å®ƒæ—¶è¿˜å°†è¿”å›žè¯¥å€¼ã€‚

å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹å‡½æ•°`sum`ï¼Œï¼ˆåˆ°ç›®å‰ä¸ºæ­¢ï¼‰æ¯æ¬¡éƒ½ä½¿ç”¨æ•°å€¼ä½œä¸ºå‚æ•°æ¥è°ƒç”¨å®ƒï¼š

[![](media/15959140166340/dhiaau4lo3n457yqud4o.png)](media/15959140166340/dhiaau4lo3n457yqud4o.png)

è¿™æ®µä»£ç ä¼šè¿”å›žæ•°å­—`3`ï¼ ä¸‹æ¬¡è°ƒç”¨å®ƒæ—¶ï¼Œå¼•æ“Žå°±ä¼šå‡å®šæˆ‘ä»¬å†æ¬¡ä½¿ç”¨ä¸¤ä¸ªæ•°å€¼å¯¹å…¶è¿›è¡Œè°ƒç”¨ã€‚

å¦‚æžœæ˜¯è¿™æ ·ï¼Œå°±æ— éœ€è¿›è¡ŒåŠ¨æ€æŸ¥æ‰¾ï¼Œè€Œåªéœ€é‡ç”¨ä¼˜åŒ–è¿‡çš„æœºå™¨ç å°±å¯ä»¥äº†ã€‚å¦åˆ™ï¼Œå¦‚æžœå‡è®¾ä¸æ­£ç¡®ï¼Œå®ƒå°†æ¢å¤ä¸ºåŽŸå§‹å­—èŠ‚ç ï¼Œè€Œä¸æ˜¯ä¼˜åŒ–è¿‡çš„æœºå™¨ç ã€‚

æ¯”å¦‚ï¼Œä¸‹ä¸€æ¬¡è°ƒç”¨å®ƒæ—¶ï¼Œæˆ‘ä»¬ä¼ é€’çš„æ˜¯å­—ç¬¦ä¸²è€Œä¸æ˜¯æ•°å­—ã€‚ç”±äºŽJavaScriptæ˜¯åŠ¨æ€ç±»åž‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹è€Œæ²¡æœ‰ä»»ä½•é”™è¯¯ï¼

[![](media/15959140166340/zugnjsg813urbj6vr4iy.png)](media/15959140166340/zugnjsg813urbj6vr4iy.png)

è¿™æ„å‘³ç€æ•°å­—`2`ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å‡½æ•°å°†è¿”å›žå­—ç¬¦ä¸²`12`ã€‚å¼•æ“Žä¼šå›žè¿‡æ¥æ‰§è¡Œè§£é‡Šè¿‡çš„å­—èŠ‚ç ï¼Œå¹¶æ›´æ–°ç±»åž‹åé¦ˆã€‚


-------


å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰ç”¨ï¼ ðŸ˜Šå½“ç„¶ï¼Œæˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ²¡æœ‰æ¶‰åŠå¼•æ“Žçš„å¾ˆå¤šéƒ¨åˆ†ï¼ˆJSå †ã€è°ƒç”¨æ ˆç­‰ï¼‰ï¼Œæˆ‘ç¨åŽå¯èƒ½ä¼šæ¶‰åŠï¼ å¦‚æžœæ‚¨å¯¹JavaScriptçš„å†…éƒ¨æœºåˆ¶æ„Ÿå…´è¶£ï¼Œæˆ‘ç»å¯¹é¼“åŠ±æ‚¨è‡ªå·±å¼€å§‹åšä¸€äº›ç ”ç©¶ï¼ŒV8æ˜¯å¼€æºçš„ï¼Œå¹¶ä¸”æœ‰ä¸€äº›ä¸é”™çš„æ–‡æ¡£è¯´æ˜Žå…¶å·¥ä½œåŽŸç†ï¼ðŸ¤–

[V8 Docs](https://v8.dev/)Â ||Â [V8 Github](https://github.com/v8/v8)Â ||Â [Chrome University 2018: Life Of A Script](https://www.youtube.com/watch?v=voDhHPNMEzg&t=729s%3Cbr%3E%0A)

> åŽŸæ–‡ by Lydia Hallieï¼š[https://dev.to/lydiahallie/javascript-visualized-the-javascript-engine-4cdf](https://dev.to/lydiahallie/javascript-visualized-the-javascript-engine-4cdf)