# å›¾è§£JavaScriptç”Ÿæˆå™¨å’Œè¿­ä»£å™¨

![](media/15959149279378/15959176127181.jpg) 

ES6å¼•å…¥äº†ä¸€ä¸ªå¾ˆé…·çš„ä¸œè¥¿ï¼Œå«åš**ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰å‡½æ•°**ã€‚æ¯å½“æˆ‘é—®äººä»¬æœ‰å…³ç”Ÿæˆå™¨å‡½æ•°çš„é—®é¢˜æ—¶ï¼Œå¾—åˆ°çš„å›žå¤åŸºæœ¬ä¸Šéƒ½æ˜¯ï¼šâ€œæˆ‘æ›¾çœ‹åˆ°è¿‡ä¸€æ¬¡ï¼Œæ²¡æžæ˜Žç™½ï¼Œç„¶åŽå°±å†ä¹Ÿæ²¡æœ‰çœ‹åˆ°è¿‡â€ï¼Œâ€œå“¦ï¼Œå¤©å“ªï¼Œæˆ‘è¯»è¿‡å¾ˆå¤šæœ‰å…³ç”Ÿæˆå™¨å‡½æ•°çš„åšå®¢æ–‡ç« ï¼Œä½†ä¾ç„¶è¿˜æ²¡æœ‰æžæ˜Žç™½â€ï¼Œâ€œæˆ‘æ˜¯æžæ˜Žç™½äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆæœ‰äººä¼šç”¨å®ƒå•Šï¼Ÿâ€ï¼ŒðŸ¤”ä¹Ÿè®¸é‚£åªæ˜¯æˆ‘ä¸€ç›´åœ¨ä¸Žè‡ªå·±è¿›è¡Œçš„å¯¹è¯ï¼Œå› ä¸ºé‚£æ˜¯æˆ‘å¾ˆé•¿ä¸€æ®µæ—¶é—´ä»¥æ¥ä¹ æƒ¯çš„æ€è€ƒæ–¹å¼ï¼ä½†æ˜¯ç”Ÿæˆå™¨å‡½æ•°æ˜¯çœŸçš„å¾ˆé…·ã€‚

é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯**ç”Ÿæˆå™¨å‡½æ•°**å‘¢ï¼Ÿä¸‹é¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå¸¸è§„çš„è€å¼å‡½æ•°ã€‚ðŸ‘µðŸ¼

[![](media/15959149279378/2ta7m1vxju6j1dzg7t7c.png)](media/15959149279378/2ta7m1vxju6j1dzg7t7c.png)

æ˜¯çš„ï¼Œè¿™ç»å¯¹æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼å®ƒåªæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä¼šè¾“å‡ºä¸€ä¸ªå€¼4æ¬¡ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼

[![Alt Text](media/15959149279378/unsiscmakhlgxl4dcji7.gif)](media/15959149279378/unsiscmakhlgxl4dcji7.gif)

â€œä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆä½ è¦æµªè´¹æˆ‘5ç§’é’Ÿçš„æ—¶é—´è®©æˆ‘çœ‹çœ‹è¿™ä¸ªæ²¡åŠ²çš„æ™®é€šå‡½æ•°å‘¢ï¼Ÿâ€ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ã€‚æ™®é€šå‡½æ•°éµå¾ªä¸€ç§ç§°ä¸º**è¿è¡Œè‡³å®Œæˆ**çš„æ¨¡åž‹ï¼šå½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒå°†ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°å®Œæˆä¸ºæ­¢ï¼ˆå¥½å§ï¼Œé™¤éžæŸå¤„å‡ºé”™äº†ï¼‰ã€‚æˆ‘ä»¬ä¸èƒ½éšæ„åœ¨ä¸­é—´çš„æŸä¸ªä½ç½®**æš‚åœ**ä¸€ä¸ªå‡½æ•°ã€‚

çŽ°åœ¨æœ€é…·çš„éƒ¨åˆ†æ¥äº†ï¼šç”Ÿæˆå™¨å‡½æ•°ä¸éµå¾ª**è¿è¡Œåˆ°å®Œæˆ**æ¨¡åž‹ï¼ ðŸ¤¯è¿™æ˜¯å¦æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨æ‰§è¡ŒæŸä¸ªç”Ÿæˆå™¨å‡½æ•°æ—¶éšæœºå°†å…¶æš‚åœå‘¢ï¼Ÿå—¯ï¼Œå·®ä¸å¤šå§ï¼ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨å‡½æ•°ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚

æˆ‘ä»¬é€šè¿‡åœ¨å…³é”®å­—`function`åŽåŠ ä¸Šä¸€ä¸ªæ˜Ÿå·`*`ï¼Œæ¥åˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ã€‚

[![](media/15959149279378/7j9pxfpvmecip71ldjwg.png)](media/15959149279378/7j9pxfpvmecip71ldjwg.png)

ä½†è¿™ä¸æ˜¯æˆ‘ä»¬è¦ç”¨ç”Ÿæˆå™¨å‡½æ•°æ‰€è¦åšçš„å…¨éƒ¨ï¼ä¸Žå¸¸è§„å‡½æ•°ç›¸æ¯”ï¼Œç”Ÿæˆå™¨å‡½æ•°å®žé™…ä¸Šä»¥å®Œå…¨ä¸åŒçš„æ–¹å¼å·¥ä½œï¼š

* è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ä¼šè¿”å›žä¸€ä¸ª**ç”Ÿæˆå™¨å¯¹è±¡**ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚
* æˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿæˆå™¨å‡½æ•°ä¸­ä½¿ç”¨`yield`å…³é”®å­—æ¥**æš‚åœ**æ‰§è¡Œã€‚

ä½†è¿™åˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Ÿï¼

æˆ‘ä»¬å…ˆçœ‹çœ‹ç¬¬ä¸€æ¡ï¼šè°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°å°†è¿”å›žä¸€ä¸ª**ç”Ÿæˆå™¨å¯¹è±¡**ã€‚å½“è°ƒç”¨å¸¸è§„å‡½æ•°æ—¶ï¼Œå‡½æ•°ä½“å°†è¢«æ‰§è¡Œï¼Œå¹¶æœ€ç»ˆè¿”å›žä¸€ä¸ªå€¼ã€‚ä½†æ˜¯ï¼Œå½“è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°æ—¶ï¼Œä¼šè¿”å›ž**ç”Ÿæˆå™¨å¯¹è±¡**ï¼ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¾“å‡ºç”Ÿæˆå™¨å‡½æ•°çš„è¿”å›žå€¼æ—¶æ˜¯ä»€ä¹ˆæ ·å­ã€‚

[![](media/15959149279378/lyuivuuepy1hzpok8rc5.gif)](media/15959149279378/lyuivuuepy1hzpok8rc5.gif)

çŽ°åœ¨ï¼Œæˆ‘å¯ä»¥å¬åˆ°ä½ å†…å¿ƒåœ¨å°–å«ï¼ˆç”šè‡³å‘å‡ºå£°äº†ðŸ™ƒï¼‰ï¼Œå› ä¸ºè¿™çœ‹èµ·æ¥æœ‰ç‚¹è®©äººéš¾ä»¥æ‰¿å—ã€‚ä½†æ˜¯åˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬å®žé™…ä¸Šä¸å¿…ç”¨ä½ åœ¨è¿™é‡Œçœ‹åˆ°çš„ä»»ä½•å±žæ€§ã€‚é‚£ä¹ˆï¼Œç”Ÿæˆå™¨å¯¹è±¡æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦é€€åŽä¸€å°æ­¥ï¼Œå¹¶å›žç­”å¸¸è§„å‡½æ•°å’Œç”Ÿæˆå™¨å‡½æ•°ä¹‹é—´çš„ç¬¬äºŒä¸ªåŒºåˆ«ï¼š**æˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿæˆå™¨å‡½æ•°ä¸­ä½¿ç”¨`yield`å…³é”®å­—æ¥â€œæš‚åœâ€æ‰§è¡Œ**ã€‚

ä½¿ç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™å¦‚ä¸‹ä»£ç ï¼ˆ`genFunc`æ˜¯`generatorFunction`çš„ç¼©å†™ï¼‰ï¼š

[![](media/15959149279378/1qo0upq0meh6gj2gs08o.png)](media/15959149279378/1qo0upq0meh6gj2gs08o.png)

è¿™é‡Œçš„`yield`å…³é”®å­—æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿå½“å¼•æ“Žé‡åˆ°`yield`å…³é”®å­—çš„æ—¶å€™ï¼Œç”Ÿæˆå™¨çš„æ‰§è¡Œå°†è¢«**â€œæš‚åœâ€**ã€‚è€Œä¸”æœ€æ£’çš„æ˜¯ï¼Œä¸‹æ¬¡è¿è¡Œè¯¥å‡½æ•°æ—¶ï¼Œå®ƒä¼šè®°ä½å®ƒå…ˆå‰æš‚åœçš„ä½ç½®ï¼Œç„¶åŽä»Žé‚£é‡Œå¼€å§‹è¿è¡Œï¼ðŸ˜ƒ é‚£ä¹ˆï¼Œä¸‹é¢åŸºæœ¬ä¸Šå°±æ˜¯è¿è¡Œè¯¥å‡½æ•°æ—¶è¦å‘ç”Ÿçš„äº‹æƒ…ï¼ˆä¸è¦æ‹…å¿ƒï¼Œç¨åŽä¼šå¯¹æ­¤è¿›è¡ŒåŠ¨ç”»æ¼”ç¤ºï¼‰ï¼š

1. ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒåœ¨ç¬¬ä¸€è¡Œâ€œæš‚åœâ€ï¼Œå¹¶ç”Ÿæˆå­—ç¬¦ä¸²å€¼`'âœ¨'`ã€‚
2. ç¬¬äºŒæ¬¡è¿è¡Œæ—¶ï¼Œå®ƒåœ¨ä¸Šä¸€ä¸ª`yield`å…³é”®å­—çš„è¡Œå¼€å§‹ï¼Œä¸€ç›´å‘ä¸‹è¿è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬äºŒä¸ª`yield`å…³é”®å­—ï¼Œå¹¶ç”Ÿæˆå€¼`'ðŸ’•'`ã€‚
3. ç¬¬ä¸‰æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒåœ¨ä¸Šä¸€ä¸ª`yield`å…³é”®å­—çš„è¡Œå¼€å§‹ï¼Œä¸€ç›´å‘ä¸‹è¿è¡Œï¼Œç›´åˆ°é‡åˆ°`return`å…³é”®å­—ï¼Œç„¶åŽè¿”å›žå€¼`'Done!'`ã€‚

ä½†æ˜¯...æˆ‘ä»¬åœ¨å‰é¢çœ‹åˆ°çš„æ˜¯ï¼šå¦‚æžœè°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œè¿”å›žçš„æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ï¼Œé‚£ä¹ˆå¦‚ä½•è°ƒç”¨è¿™ä¸ªç”Ÿæˆå™¨å‡½æ•°å‘¢ï¼Ÿ ðŸ¤” è¿™å°±æ˜¯ç”Ÿæˆå™¨å¯¹è±¡å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ï¼

ç”Ÿæˆå™¨å¯¹è±¡ï¼ˆåœ¨åŽŸåž‹é“¾ä¸Šï¼‰åŒ…å«ä¸€ä¸ª`next()`æ–¹æ³•ã€‚æˆ‘ä»¬å°±æ˜¯ç”¨è¿™ä¸ªæ–¹æ³•æ¥è¿­ä»£ç”Ÿæˆå™¨å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä¸ºäº†è®°ä½å®ƒä¹‹å‰åœ¨ç”Ÿæˆä¸€ä¸ªå€¼åŽä¸­æ–­çš„åœ°æ–¹çš„çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”Ÿæˆå™¨å¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚æˆ‘ä¼šæŠŠè¿™ä¸ªå˜é‡ç®€ç§°ä¸º`genObj`ï¼ˆ`generatorObject`çš„ç®€ç§°ï¼‰ã€‚

[![](media/15959149279378/y54clkzwbc9oemzgybh5.gif)](media/15959149279378/y54clkzwbc9oemzgybh5.gif)

æ˜¯çš„ï¼Œè¿™å’Œæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ä¸€æ ·å¯æ€•ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹åœ¨ç”Ÿæˆå™¨å¯¹è±¡`genObj`ä¸Šè°ƒç”¨`next()`æ–¹æ³•æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼

[![](media/15959149279378/ryzc9gpzw4x5f0eqhzad.gif)](media/15959149279378/ryzc9gpzw4x5f0eqhzad.gif)

ç”Ÿæˆå™¨ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ª`yield`å…³é”®å­—ï¼Œè€Œè¿™é‡Œè¿™ä¸ªå…³é”®å­—æ°å¥½åœ¨ç¬¬ä¸€è¡Œï¼å®ƒ**ç”Ÿæˆï¼ˆyieldï¼‰**äº†ä¸€ä¸ªåŒ…å«`value`å±žæ€§å’Œ`done`å±žæ€§çš„å¯¹è±¡`{ value: ... , done: ... }`ï¼š

* `value`å±žæ€§ç­‰äºŽæˆ‘ä»¬ç”Ÿæˆçš„å€¼ã€‚
* `done`å±žæ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä»…åœ¨ç”Ÿæˆå™¨å‡½æ•°**è¿”å›ž**ä¸€ä¸ªå€¼ï¼ˆä¸æ˜¯ç”Ÿæˆï¼ðŸ˜Šï¼‰åŽï¼Œæ‰è®¾ç½®ä¸º`true`ã€‚

æˆ‘ä»¬åœæ­¢äº†éåŽ†ç”Ÿæˆå™¨ï¼Œè¿™è®©å‡½æ•°çœ‹èµ·æ¥åƒæ˜¯æš‚åœäº†ä¸€æ ·ï¼è¿™å¤šé…·å•Šã€‚ä¸‹é¢æˆ‘ä»¬å†æ¬¡è°ƒç”¨`next()`æ–¹æ³•ï¼ðŸ˜ƒ

[![](media/15959149279378/e7hz87c6xtd31qjx19va.gif)](media/15959149279378/e7hz87c6xtd31qjx19va.gif)

é¦–å…ˆï¼Œè¾“å‡ºå­—ç¬¦ä¸²`First log!`åˆ°æŽ§åˆ¶å°ä¸­ã€‚è¿™æ¡è¯­å¥æ—¢æ²¡æœ‰`yield`ä¹Ÿæ²¡æœ‰`return`å…³é”®å­—ï¼Œæ‰€ä»¥å¼•æ“Žä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼ç„¶åŽï¼Œé‡åˆ°äº†ä¸€ä¸ª`yield`å…³é”®å­—ï¼Œå…¶å€¼ä¸º`'ðŸ’•'`ã€‚è¿™æ ·å°±ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶`value`å±žæ€§çš„å€¼æ˜¯`'ðŸ’•'`ï¼Œ`done`å±žæ€§çš„å€¼ä¸º`false`ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ä»Žç”Ÿæˆå™¨ä¸­è¿”å›žã€‚

å¿«ç»“æŸäº†ï¼ä¸‹é¢æˆ‘ä»¬æœ€åŽä¸€æ¬¡è°ƒç”¨`next()`ã€‚

[![Alt Text](media/15959149279378/33epxsx8znmhm0qojsuu.gif)](media/15959149279378/33epxsx8znmhm0qojsuu.gif)

å­—ç¬¦ä¸²`Second log!`è¢«è¾“å‡ºåˆ°æŽ§åˆ¶å°ã€‚ç„¶åŽï¼Œå¼•æ“Žé‡åˆ°ä¸€ä¸ªè¿”å›žå€¼ä¸º`'Done!'`çš„`return`å…³é”®å­—ã€‚å¼•æ“Žè¿”å›žä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„`value`å±žæ€§å€¼ä¸º``'Done!'`ã€‚è¿™æ¬¡æˆ‘ä»¬æ˜¯å®žé™…è¿”å›žäº†ï¼Œæ‰€ä»¥`done`å±žæ€§å€¼è¢«è®¾ç½®ä¸º`true`ï¼

`done`å±žæ€§å®žé™…ä¸Šéžå¸¸é‡è¦ã€‚**æˆ‘ä»¬åªèƒ½ä¸€æ¬¡è¿­ä»£ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡**ã€‚ä»€ä¹ˆï¼Ÿï¼é‚£ä¹ˆå½“æˆ‘ä»¬å†æ¬¡è°ƒç”¨`next()`æ–¹æ³•æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ

[![](media/15959149279378/wooo83by4eh12akmg5wb.gif)](media/15959149279378/wooo83by4eh12akmg5wb.gif)

å®ƒåªæ˜¯æ°¸è¿œè¿”å›ž`undefined`ã€‚å¦‚æžœè¦å†æ¬¡è¿­ä»£ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„ç”Ÿæˆå™¨å¯¹è±¡ï¼

* * *
 
å¦‚æˆ‘ä»¬æ‰€è§ï¼Œç”Ÿæˆå™¨å‡½æ•°è¿”å›žä¸€ä¸ªè¿­ä»£å™¨ï¼ˆç”Ÿæˆå™¨å¯¹è±¡ï¼‰ã€‚ä½†æ˜¯..ç­‰ç­‰ï¼Œ**è¿­ä»£å™¨**ï¼Ÿè¿™æ˜¯å¦æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨è¿”å›žçš„å¯¹è±¡ä¸Šç”¨`for...of`å¾ªçŽ¯ä»¥åŠæ‰©å±•è¿ç®—ç¬¦å‘¢ï¼Ÿæ˜¯çš„ï¼ðŸ¤©

ä¸‹é¢æˆ‘ä»¬è¯•ç€ç”¨`[...]`è¯­æ³•ï¼Œå°†ç”Ÿæˆçš„å€¼æ‰©å±•åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚

[![](media/15959149279378/xgk99j592vbx3qirw5or.gif)](media/15959149279378/xgk99j592vbx3qirw5or.gif)

æˆ–è€…ä¹Ÿè®¸å¯ä»¥ç”¨`for...of`å¾ªçŽ¯ï¼Ÿï¼

[![](media/15959149279378/98k242jz3bqorkjhukwl.gif)](media/15959149279378/98k242jz3bqorkjhukwl.gif)

å“Žå‘€ï¼Œè¿™ä¹ˆå¤šå¯èƒ½æ€§ï¼

ä½†æ˜¯æ˜¯ä»€ä¹ˆè®©è¿­ä»£å™¨æˆä¸ºè¿­ä»£å™¨å‘¢ï¼Ÿæˆ‘ä»¬ä¹‹æ‰€ä»¥å¯ä»¥åœ¨æ•°ç»„ã€å­—ç¬¦ä¸²ã€mapå’Œsetä¸Šç”¨`for...of`å¾ªçŽ¯å’Œæ‰©å±•è¯­æ³•ï¼Œå®žé™…ä¸Šæ˜¯å› ä¸ºå®ƒä»¬å®žçŽ°äº†**è¿­ä»£å™¨åè®®**ï¼š`[Symbol.iterator]`ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹å€¼ï¼ˆå¸¦æœ‰å¾ˆå…·æè¿°æ€§çš„åç§°ï¼Œå“ˆå“ˆðŸ’ðŸ¼â€â™€ï¸ï¼‰ï¼š

[![](media/15959149279378/hs2sf1oj537c56yaej1h.png)](media/15959149279378/hs2sf1oj537c56yaej1h.png)

`array`ã€`string`å’Œ`generatorObject`éƒ½æ˜¯è¿­ä»£å™¨ï¼ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒä»¬çš„`[Symbol.iterator]`å±žæ€§çš„å€¼ã€‚

[![](media/15959149279378/a7inxsrvrp8ykg3xw6zu.gif)](media/15959149279378/a7inxsrvrp8ykg3xw6zu.gif)

ä½†æ˜¯ï¼Œä¸å¯è¿­ä»£çš„å€¼ä¸Šçš„`[Symbol.iterator]`çš„å€¼ä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

[![](media/15959149279378/tpuzuy58g8m7grxvqw8x.gif)](media/15959149279378/tpuzuy58g8m7grxvqw8x.gif)

æ˜¯çš„ï¼Œä¸å¯è¿­ä»£çš„å€¼å°±æ²¡è¿™ä¸ªå±žæ€§ã€‚é‚£ä¹ˆ..æˆ‘ä»¬èƒ½ä¸èƒ½åœ¨ä¸å¯è¿­ä»£çš„å€¼ä¸Šæ‰‹åŠ¨æ·»åŠ ä¸€ä¸ª`[Symbol.iterator]`å±žæ€§ï¼Œè®©ä¸å¯è¿­ä»£çš„å€¼å˜æˆå¯è¿­ä»£çš„å‘¢ï¼Ÿæ˜¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥ï¼ðŸ˜ƒ

`[Symbol.iterator]`å¿…é¡»è¿”å›žä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨åŒ…å«ä¸€ä¸ª`next()`æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è·Ÿæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°è¿‡çš„ä¸€æ ·ï¼š`{ value: '...', done: false/true }`ã€‚

ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†`[Symbol.iterator]`çš„å€¼è®¾ç½®ä¸ºç­‰äºŽä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œå› ä¸ºè¿™æ ·åšé»˜è®¤å°±è¿”å›žä¸€ä¸ªè¿­ä»£å™¨ã€‚ä¸‹é¢æˆ‘ä»¬è®©`object`å˜æˆå¯è¿­ä»£çš„ï¼Œå¹¶ä¸”è®©ç”Ÿæˆçš„å€¼å˜æˆä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ï¼š

[![](media/15959149279378/oysyy7v71o2q9q9mrcsx.png)](media/15959149279378/oysyy7v71o2q9q9mrcsx.png)

çŽ°åœ¨çœ‹çœ‹æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„`object`å¯¹è±¡ä¸Šä½¿ç”¨æ‰©å±•è¯­æ³•æˆ–è€…`for...of`å¾ªçŽ¯ä¼šå‘ç”Ÿä»€ä¹ˆï¼

[![](media/15959149279378/pw2qq1tkfbp8zccuecac.gif)](media/15959149279378/pw2qq1tkfbp8zccuecac.gif)

æˆ–è€…ä¹Ÿè®¸æˆ‘ä»¬åªæƒ³èŽ·å–å¯¹è±¡çš„é”®ã€‚å“¦ï¼Œé‚£å¾ˆå®¹æ˜“ï¼Œæˆ‘ä»¬åªéœ€è¦ç”Ÿæˆ`Object.keys(this)`è€Œä¸æ˜¯`this`ï¼

[![](media/15959149279378/ankit4dn67unnwzfkv9y.png)](media/15959149279378/ankit4dn67unnwzfkv9y.png)

å—¯ï¼Œæˆ‘ä»¬è¯•ä¸€ä¸‹ã€‚

[![](media/15959149279378/75kf40lqcqrudzqgkeb7.gif)](media/15959149279378/75kf40lqcqrudzqgkeb7.gif)

æžå®šï¼`Object.keys(this)`æ˜¯ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥ç”Ÿæˆçš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ç„¶åŽæˆ‘ä»¬æŠŠè¿™ä¸ªç”Ÿæˆçš„æ•°ç»„æ‰©å±•åˆ°å¦ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç»“æžœå°±å¾—åˆ°ä¸€ä¸ªåµŒå¥—çš„æ•°ç»„ã€‚æˆ‘ä»¬å¹¶ä¸æƒ³è¦è¿™ä¸ªï¼Œåªæ˜¯æƒ³ç”Ÿæˆæ¯ä¸ªå•ç‹¬çš„é”®ï¼

å¥½æ¶ˆæ¯ï¼ðŸ¥³ æˆ‘ä»¬å¯ä»¥ç”¨`yield*`å…³é”®å­—åœ¨ç”Ÿæˆå™¨ä¸­çš„è¿­ä»£å™¨ä¸­ç”Ÿæˆå•ä¸ªå€¼ï¼Œæ‰€ä»¥`yield`å¸¦äº†ä¸€ä¸ªæ˜Ÿå·ï¼å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°é¦–å…ˆç”Ÿæˆä¸€ä¸ªé³„æ¢¨ï¼Œç„¶åŽæˆ‘ä»¬æƒ³åˆ†åˆ«ç”Ÿæˆå¦ä¸€ä¸ªè¿­ä»£å™¨çš„å€¼ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ªæ•°ç»„ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ç”¨`yield*`æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ç„¶åŽæˆ‘ä»¬**å§”æ‰˜**ç»™å¦ä¸€ä¸ªç”Ÿæˆå™¨ï¼

[![](media/15959149279378/jtyn5s5o3vdhjkbwwyb0.gif)](media/15959149279378/jtyn5s5o3vdhjkbwwyb0.gif)

åœ¨ç»§ç»­è¿­ä»£`genObj`è¿­ä»£å™¨ä¹‹å‰ï¼Œè¢«å§”æ‰˜çš„ç”Ÿæˆå™¨çš„æ¯ä¸ªå€¼éƒ½ç”Ÿæˆäº†ã€‚

è¿™æ­£æ˜¯ä¸ºäº†å•ç‹¬å¾—åˆ°æ‰€æœ‰å¯¹è±¡çš„é”®æ‰€éœ€è¦åšçš„ï¼

[![](media/15959149279378/btr4ytbb04c44qfs96v2.gif)](media/15959149279378/btr4ytbb04c44qfs96v2.gif)

* * *

ç”Ÿæˆå™¨å‡½æ•°çš„å¦ä¸€ç§ç”¨æ³•ï¼Œæ˜¯æˆ‘ä»¬å¯ä»¥ï¼ˆåœ¨æŸç§ç¨‹åº¦ä¸Šï¼‰å°†å®ƒä»¬ç”¨ä½œä¸ºè§‚å¯Ÿè€…å‡½æ•°ã€‚ç”Ÿæˆå™¨å¯ä»¥ç­‰å¾…ä¼ å…¥çš„æ•°æ®ï¼Œå¹¶ä¸”åªæœ‰å½“è¯¥æ•°æ®è¢«ä¼ é€’è¿‡æ¥æ—¶ï¼Œæ‰ä¼šå¤„ç†å®ƒã€‚æ¯”å¦‚ï¼š

[![](media/15959149279378/fts36exs5chxacikjeo3.png)](media/15959149279378/fts36exs5chxacikjeo3.png)

è¿™é‡Œæœ€å¤§çš„åŒºåˆ«æ˜¯æˆ‘ä»¬ä¸æ˜¯åªæœ‰å‰ä¸€ä¸ªä¾‹å­ä¸­æ‰€çœ‹åˆ°çš„`yield [value]`ï¼Œè€Œæ˜¯å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªç§°ä¸º`second`çš„å€¼ï¼Œå¹¶ç”Ÿæˆå€¼å­—ç¬¦ä¸²`First!`ã€‚è¿™æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨`next()`æ–¹æ³•æ—¶ä¼šç”Ÿæˆçš„å€¼ã€‚

ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬ä¸€æ¬¡åœ¨å¯è¿­ä»£çš„å€¼ä¸Šè°ƒç”¨`next()`æ–¹æ³•æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚

[![Alt Text](media/15959149279378/ob5a4yi79it9q2ben137.gif)](media/15959149279378/ob5a4yi79it9q2ben137.gif)

é¦–å…ˆé‡åˆ°ç¬¬ä¸€è¡Œä¸Šçš„`yield`ï¼Œå¹¶ç”Ÿæˆå€¼`First!`ã€‚é‚£ä¹ˆï¼Œå˜é‡`second`çš„å€¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

å˜é‡`second`çš„å€¼å®žé™…ä¸Šæ˜¯**ä¸‹æ¬¡æˆ‘ä»¬è°ƒç”¨`next()`æ–¹æ³•æ—¶**ä¼ é€’ç»™è¯¥æ–¹æ³•çš„å€¼ï¼è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬ç»™`next()`æ–¹æ³•ä¼ ä¸€ä¸ªå­—ç¬¦ä¸²`'I like JavaScript'`ã€‚

[![](media/15959149279378/l1840pp2k9h9bgpt1geo.gif)](media/15959149279378/l1840pp2k9h9bgpt1geo.gif)

é‡è¦çš„æ˜¯ï¼Œåœ¨è¿™é‡Œçœ‹åˆ°ï¼Œ`next()`æ–¹æ³•çš„ç¬¬ä¸€æ¬¡è°ƒç”¨æ²¡æœ‰è®°å½•ä»»ä½•è¾“å…¥ã€‚æˆ‘ä»¬åªæ˜¯é€šè¿‡ç¬¬ä¸€æ¬¡è°ƒç”¨æ¥å¯åŠ¨è§‚å¯Ÿå™¨ã€‚ç”Ÿæˆå™¨åœ¨ç»§ç»­ä¹‹å‰ï¼Œç­‰å¾…æˆ‘ä»¬çš„è¾“å…¥ï¼Œå¹¶å¯èƒ½å¤„ç†æˆ‘ä»¬ä¼ é€’ç»™`next()`æ–¹æ³•çš„å€¼ã€‚

* * *

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šæƒ³ç”¨ç”Ÿæˆå™¨å‡½æ•°å‘¢ï¼Ÿ

ç”Ÿæˆå™¨çš„æœ€å¤§ä¼˜ç‚¹ä¹‹ä¸€å°±æ˜¯å®ƒä»¬æ˜¯**æ‡’æ±‚å€¼**çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è°ƒç”¨`next()`æ–¹æ³•åŽè¿”å›žçš„å€¼ä»…åœ¨æˆ‘ä»¬æ˜Žç¡®è¦æ±‚åŽæ‰è®¡ç®—ï¼æ™®é€šå‡½æ•°æ²¡æœ‰è¿™ç§åŠŸèƒ½ï¼šæ‰€æœ‰å€¼éƒ½ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ï¼Œä»¥é˜²å°†æ¥æŸä¸ªæ—¶é—´éœ€è¦ç”¨åˆ°å®ƒã€‚

[![Alt Text](media/15959149279378/7b24mkp7io3gmnn8pzwa.gif)](media/15959149279378/7b24mkp7io3gmnn8pzwa.gif)

è¿˜æœ‰å…¶å®ƒå‡ ä¸ªæ¡ˆä¾‹ï¼Œä½†æ˜¯æˆ‘é€šå¸¸å–œæ¬¢è¿™æ ·åšï¼Œä»¥ä¾¿åœ¨è¿­ä»£å¤§åž‹æ•°æ®é›†æ—¶èƒ½æ›´å¥½åœ°æŽ§åˆ¶ï¼

æƒ³åƒä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè¯»ä¹¦ä¿±ä¹éƒ¨æ¸…å•ï¼ðŸ“šä¸ºç®€å•èµ·è§ï¼Œæ¯ä¸ªè¯»ä¹¦ä¿±ä¹éƒ¨åªæœ‰ä¸€ä¸ªæˆå‘˜ã€‚ä¸€åä¼šå‘˜ç›®å‰æ­£åœ¨è¯»å‡ æœ¬ä¹¦ï¼Œè¿™äº›ä¹¦ä»¥æ•°ç»„`books`æ¥è¡¨ç¤ºï¼ 

[![](media/15959149279378/8opapd1iddlgj1ljixje.png)](media/15959149279378/8opapd1iddlgj1ljixje.png)

çŽ°åœ¨ï¼Œæˆ‘ä»¬åœ¨æ‰¾ä¸€æœ¬idä¸º`ey812`çš„ä¹¦ã€‚ä¸ºæ‰¾åˆ°è¿™æœ¬ä¹¦ï¼Œæˆ‘ä»¬å¯èƒ½åªç”¨ä¸€ä¸ªåµŒå¥—çš„`for`å¾ªçŽ¯æˆ–è€…ä¸€ä¸ª`forEach`è¾…åŠ©å™¨ï¼Œä½†æ˜¯è¿™æ„å‘³ç€æˆ‘ä»¬å¾—éåŽ†æ‰€æœ‰æ•°æ®ï¼Œå³ä½¿å·²ç»æ‰¾åˆ°äº†è¦æ‰¾çš„ä¿±ä¹éƒ¨ä¼šå‘˜ä¹‹åŽä¹Ÿä¼šç»§ç»­éåŽ†ä¸‹åŽ»ã€‚

å…³äºŽç”Ÿæˆå™¨ï¼Œå¾ˆæ£’çš„äº‹æƒ…æ˜¯ï¼Œé™¤éžæˆ‘ä»¬å‘Šè¯‰å®ƒåŽ»è¿è¡Œï¼Œå¦åˆ™å®ƒä¸ä¼šç»§ç»­è¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è¯„ä¼°æ¯ä¸ªè¿”å›žçš„æ¡ç›®ï¼Œå¦‚æžœæ˜¯æˆ‘ä»¬æ­£åœ¨æ‰¾çš„æ¡ç›®ï¼Œå°±ä¸éœ€è¦è°ƒç”¨`next()`äº†ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹æ˜¯å•¥æ ·å­ã€‚

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨ï¼ŒéåŽ†æ¯ä¸ªä¼šå‘˜çš„`books`æ•°ç»„ã€‚æˆ‘ä»¬æŠŠä¼šå‘˜çš„`books`æ•°ç»„ä¼ ç»™è¯¥å‡½æ•°ï¼ŒéåŽ†è¯¥æ•°ç»„ï¼Œå¹¶ç”Ÿæˆæ¯æœ¬ä¹¦ï¼

[![](media/15959149279378/vokf28crwuvbmksd57m5.png)](media/15959149279378/vokf28crwuvbmksd57m5.png)

å®Œç¾Žï¼çŽ°åœ¨æˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªéåŽ†ä¿±ä¹éƒ¨ä¼šå‘˜æ•°ç»„ï¼ˆ`members`ï¼‰çš„ç”Ÿæˆå™¨ã€‚æˆ‘ä»¬å®žé™…ä¸Šå¹¶ä¸å…³å¿ƒä¿±ä¹éƒ¨ä¼šå‘˜æœ¬èº«ï¼Œåªæ˜¯éœ€è¦éåŽ†ä»–ä»¬çš„ä¹¦ã€‚åœ¨`iterateMembers`ç”Ÿæˆå™¨ä¸­ï¼Œæˆ‘ä»¬å§”æ‰˜`iterateBooks`è¿­ä»£å™¨ç”Ÿæˆæˆå‘˜ä»¬çš„ä¹¦ï¼

[![](media/15959149279378/fy8mxxjj0uvs6rarm6mi.png)](media/15959149279378/fy8mxxjj0uvs6rarm6mi.png)

å·®ä¸å¤šäº†ï¼æœ€åŽä¸€æ­¥æ˜¯éåŽ†è¯»ä¹¦ä¿±ä¹éƒ¨æ•°ç»„ï¼ˆ`bookclubs`ï¼‰ã€‚è·Ÿä¸Šä¸ªä¾‹å­ä¸€æ ·ï¼Œæˆ‘ä»¬å®žé™…ä¸Šå¹¶ä¸å…³å¿ƒè¯»ä¹¦ä¿±ä¹éƒ¨æœ¬èº«ï¼Œåªå…³å¿ƒä¿±ä¹éƒ¨ä¼šå‘˜ï¼ˆç‰¹åˆ«æ˜¯ä¼šå‘˜ä»¬çš„ä¹¦ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬å§”æ‰˜ç»™`iterateMembers`è¿­ä»£å™¨ï¼Œå¹¶æŠŠ`clubMembers`æ•°ç»„ä¼ ç»™å®ƒã€‚

[![](media/15959149279378/x1lor0omqw9t5k2kq4iv.png)](media/15959149279378/x1lor0omqw9t5k2kq4iv.png)

ä¸ºéåŽ†æ‰€æœ‰è¿™äº›ä¸œè¥¿ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å°†`bookClubs`æ•°ç»„ä¼ é€’ç»™`iterateBookClubs`ç”Ÿæˆå™¨ï¼Œè®©ç”Ÿæˆå™¨å¯¹è±¡å¯è¿­ä»£ã€‚æˆ‘çŽ°åœ¨æš‚æ—¶å°†å…¶ç§°ä¸ºç”Ÿæˆå™¨å¯¹è±¡`it`ã€‚

[![](media/15959149279378/omg23omwi8a1d7nn1it3.png)](media/15959149279378/omg23omwi8a1d7nn1it3.png)

ä¸‹é¢æˆ‘ä»¬è°ƒç”¨`next()`æ–¹æ³•ï¼Œç›´åˆ°å¾—åˆ°idä¸º`ey812`çš„ä¹¦ã€‚

[![](media/15959149279378/72ghm4ev6el3no9esk1l.gif)](media/15959149279378/72ghm4ev6el3no9esk1l.gif)

ä¸é”™ï¼çŽ°åœ¨ä¸ºäº†å¾—åˆ°è¦æ‰¾çš„ä¹¦ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦éåŽ†æ‰€æœ‰æ•°æ®ï¼Œè€Œæ˜¯åªæŒ‰éœ€æŸ¥æ‰¾æ•°æ®ï¼å½“ç„¶ï¼Œæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨è°ƒç”¨`next()`æ–¹æ³•æ•ˆçŽ‡ä¸æ˜¯å¾ˆé«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥åšä¸€ä¸ªå‡½æ•°å§ï¼

ä¸‹é¢å°†æˆ‘ä»¬è¦æ‰¾çš„ä¹¦çš„`id`ä¼ ç»™è¯¥å‡½æ•°ã€‚å¦‚æžœ`value.id`æ˜¯æˆ‘ä»¬è¦æ‰¾çš„idï¼Œé‚£ä¹ˆå°±åªè¿”å›žæ•´ä¸ª`value`ï¼ˆbookå¯¹è±¡ï¼‰ã€‚å¦åˆ™ï¼Œå¦‚æžœä¸æ˜¯è¦æ‰¾çš„`id`ï¼Œå°±å†æ¬¡è°ƒç”¨`next()`ï¼

[![](media/15959149279378/hxyeemfr3q8pqqotk51j.png)](media/15959149279378/hxyeemfr3q8pqqotk51j.png)

[![](media/15959149279378/x1zh0ygt5yfq5vb2f5at.gif)](media/15959149279378/x1zh0ygt5yfq5vb2f5at.gif)

å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¾ˆå°å¾ˆå°çš„æ•°æ®é›†ã€‚ä¸è¿‡ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰æˆåƒä¸Šä¸‡çš„æ•°æ®ï¼Œæˆ–è€…å¯èƒ½æ˜¯ä¸€ä¸ªä¼ å…¥çš„æµï¼Œä¸ºäº†åªæ‰¾åˆ°ä¸€ä¸ªå€¼ï¼Œæˆ‘ä»¬éœ€è¦è§£æžã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¿…é¡»ç­‰å¾…æ•´ä¸ªæ•°æ®é›†å‡†å¤‡å°±ç»ªï¼Œæ‰èƒ½å¼€å§‹è§£æžã€‚è€Œç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åªéœ€è¦å°éƒ¨åˆ†æ•°æ®ï¼Œæ£€æŸ¥è¯¥æ•°æ®ï¼Œç„¶åŽåªåœ¨æˆ‘ä»¬è°ƒç”¨`next()`æ–¹æ³•æ—¶å€™æ‰ä¼šç”Ÿæˆå€¼ï¼

* * *

å¦‚æžœä½ ä»ç„¶å¤„äºŽæ‡µé€¼çŠ¶æ€ï¼Œä¸è¦æ‹…å¿ƒã€‚è™½ç„¶ç”Ÿæˆå™¨å‡½æ•°ç¡®å®žç›¸å½“éš¾ä»¥ç†è§£ï¼Œä½†æ˜¯åªè¦äº²è‡ªç”¨è¿‡å®ƒä»¬ï¼Œå¹¶ä¸”æœ‰ä¸€äº›å¯é çš„æ¡ˆä¾‹ï¼Œé‚£å°±æ²¡é‚£ä¹ˆéš¾äº†ã€‚å¸Œæœ›æœ‰äº›æœ¯è¯­æ›´æ¸…æ¥šäº†ç‚¹ï¼Œè·Ÿå¾€å¸¸ä¸€æ ·ï¼šæœ‰ä»»åŠ¡ç–‘é—®ï¼Œè¯·éšæ—¶è”ç³»ï¼ðŸ˜ƒ

> åŽŸæ–‡ by Lydia Hallieï¼š[https://dev.to/lydiahallie/javascript-visualized-generators-and-iterators-e36](https://dev.to/lydiahallie/javascript-visualized-generators-and-iterators-e36)